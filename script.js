// --- Translations Data ---
const translations = {
  it: {
    nav: { home: "Home", services: "Servizi", portfolio: "Portfolio", about: "Chi Sono", contact: "Contattami" },
    hero: {
      badge: "Creative Developer",
      title_1: "Design che cattura, <br> ",
      title_2: "codice che converte.",
      subtitle: "Brand Identity â€¢ Sviluppo Web/Mobile â€¢ Graphic Design â€¢ Video Making",
      btn_work: "Scopri i miei lavori",
      btn_info: "Richiedi Info!",
      stat_projects: "Progetti Completati",
      stat_exp: "Anni di Esperienza",
      stat_clients: "Clienti Soddisfatti",
      scroll: "Scorri per esplorare"
    },
    services: {
      tag: "Servizi",
      title_1: "Trasformo le tue",
      title_2: "idee in realtÃ ",
      subtitle: "Da idea a risultato cucito su misura, soluzioni concrete per elevare il tuo brand.",
      graphic_desc: "Oltre il semplice logo. Creo sistemi visivi capaci di raccontare chi sei e di restare impressi nella mente dei clienti.",
      web_desc: "Siti veloci, sicuri e ottimizzati (Responsive). Realizzo ecosistemi web su misura, dove il design incontra le migliori performance tecniche e logiche SEO.",
      ios_desc: "App che le persone amano usare. Progetto interfacce intuitive e sviluppo in Swift/Flutter per offrire un'esperienza fluida su ogni dispositivo.z",
      video_desc: "Contenuti che catturano. Video dinamici e storytelling visivo per fermare lo scrolling e comunicare il tuo messaggio in pochi secondi."
    },
    portfolio: {
      tag: "Portfolio",
      title: "Progetti",
      subtitle: "Una selezione dei miei progetti piÃ¹ significativi.",
      filter_all: "Tutti",
      view_project: "Scopri il progetto â†’",
      visit_site: "Visita il sito â†’"
    },
    about: {
      tag: "About me",
      title_1: "Dall'idea al lancio,",
      title_2: "senza compromessi",
      text: "Mi definisco un Creative Developer perchÃ© surfo tra i due mondi. Come designer, curo l'emozione e l'impatto visivo del tuo brand; come developer, scrivo codice pulito e scalabile per assicurarmi che tutto funzioni alla perfezione. Che si tratti di un'App iOS, di un sito web o di una nuova Brand Identity, metto al servizio del tuo business un'unica visione integrata. Il mio obiettivo Ã¨ uno solo: rendere il tuo brand indimenticabile.",
    },
    contact: {
      tag: "Contatti",
      title_1: "Hai un'idea?",
      title_2: "Diamole una forma!",
      subtitle: "Se sei pronto a lanciare il tuo prossimo progetto o vuoi evolvere quello attuale, parliamone.",
      label_email: "Email",
      label_location: "Location",
      label_follow: "Seguimi",
      form_name: "Nome",
      form_name_ph: "Il tuo nome",
      form_phone: "Telefono",
      form_phone_ph: "Il tuo numero di telefono",
      form_email: "Email",
      form_email_ph: "La tua email",
      form_msg: "Messaggio",
      form_msg_ph: "Parlami del tuo progetto...",
      form_btn: "Invia messaggio"
    },
    footer: {
      nav: "Navigazione",
      services: "Servizi",
      social: "Social",
      cta: "Prenota una call",
      copyright: "Â© 2026 Christian Ciriello â€¢ Powered By Christian Ciriello"
    },
    project_cta: {
      title: "Ti piace questo progetto?",
      subtitle: "Possiamo creare qualcosa di altrettanto incredibile per il tuo business.",
      btn: "Parliamo del tuo progetto"
    }
  },
  en: {
    nav: { home: "Home", services: "Services", portfolio: "Portfolio", about: "About", contact: "Contact" },
    hero: {
      badge: "Creative Developer",
      title_1: "Design that speaks,",
      title_2: "experiences that convert.",
      subtitle: "Brand Identity â€¢ Web/Mobile Dev â€¢ Graphic Design â€¢ Video Making",
      btn_work: "View my work",
      btn_info: "Get Info!",
      stat_projects: "Projects Completed",
      stat_exp: "Years Experience",
      stat_clients: "Happy Clients",
      scroll: "Scroll to explore"
    },
    services: {
      tag: "Services",
      title_1: "Turning your",
      title_2: "ideas into reality",
      subtitle: "From idea to tailored result, concrete solutions to elevate your brand.",
      graphic_desc: "Not just aesthetics: I create coherent visual systems that tell your brand values and stick in customers' minds.",
      web_desc: "Fast, responsive, and SEO-optimized websites designed to offer smooth navigation and maximize conversions.",
      ios_desc: "From idea to prototype: developing intuitive mobile interfaces (iOS/Android) always putting the user at the center.",
      video_desc: "Dynamic storytelling for your social channels and ad campaigns. High-impact videos that capture attention in seconds."
    },
    portfolio: {
      tag: "Portfolio",
      title: "Projects",
      subtitle: "A selection of my most significant projects.",
      filter_all: "All",
      view_project: "View project â†’",
      visit_site: "Visit site â†’"
    },
    about: {
      tag: "About me",
      title_1: "Designer with a",
      title_2: "unique vision",
      text: "\"I'm Christian Ciriello, Graphic Designer & Web/Mobile Developer. For over 4 years I've helped companies and startups define their digital presence through an approach that blends aesthetics and performance. My method isn't limited to graphic execution but digs deep into your market to find visual solutions that generate concrete results. Whether it's a rebranding or creating a web platform from scratch, my goal is one: to make your brand unforgettable.\"",
      val_creativity: "Creativity",
      val_creativity_desc: "Every project is an opportunity to create something unique.",
      val_precision: "Precision",
      val_precision_desc: "Maniacal attention to detail in every aspect of work.",
      val_passion: "Passion",
      val_passion_desc: "I love what I do and it shows in the results.",
      val_quality: "Quality",
      val_quality_desc: "High standards to always exceed expectations."
    },
    contact: {
      tag: "Contacts",
      title_1: "Let's start",
      title_2: "collaborating",
      subtitle: "Have a project in mind? Let's talk and turn your ideas into extraordinary visual realities.",
      label_email: "Email",
      label_location: "Location",
      label_follow: "Follow me",
      form_name: "Name",
      form_name_ph: "Your name",
      form_phone: "Phone",
      form_phone_ph: "Your phone number",
      form_email: "Email",
      form_email_ph: "Your email",
      form_msg: "Message",
      form_msg_ph: "Tell me about your project...",
      form_btn: "Send message"
    },
    footer: {
      nav: "Navigation",
      services: "Services",
      social: "Social",
      cta: "Book a call",
      copyright: "Â© 2026 Christian Ciriello â€¢ Powered By Christian Ciriello"
    },
    project_cta: {
      title: "Do you like this project?",
      subtitle: "We can create something just as incredible for your business.",
      btn: "Let's talk about your project"
    }
  },
  es: {
    nav: { home: "Inicio", services: "Servicios", portfolio: "Portafolio", about: "Sobre mÃ­", contact: "Contacto" },
    hero: { badge: "Desarrollador Creativo", title_1: "DiseÃ±o que comunica,", title_2: "experiencias que convierten.", subtitle: "Identidad de Marca â€¢ Desarrollo Web/MÃ³vil â€¢ DiseÃ±o GrÃ¡fico", btn_work: "Ver mis trabajos", btn_info: "Â¡Solicitar Info!", stat_projects: "Proyectos Completados", stat_exp: "AÃ±os de Experiencia", stat_clients: "Clientes Felices", scroll: "Desliza para explorar" },
    services: { tag: "Servicios", title_1: "Transformo tus", title_2: "ideas en realidad", subtitle: "Soluciones concretas para elevar tu marca.", graphic_desc: "Creo sistemas visuales coherentes que cuentan los valores de tu marca.", web_desc: "Sitios web rÃ¡pidos y responsivos diseÃ±ados para maximizar conversiones.", ios_desc: "Desarrollo de interfaces mÃ³viles intuitivas centradas en el usuario.", video_desc: "NarraciÃ³n dinÃ¡mica para tus canales sociales y campaÃ±as." },
    portfolio: { tag: "Portafolio", title: "Proyectos", subtitle: "Una selecciÃ³n de mis proyectos mÃ¡s significativos.", filter_all: "Todos", view_project: "Ver proyecto â†’", visit_site: "Visitar sitio â†’" },
    about: { tag: "Sobre mÃ­", title_1: "DiseÃ±ador con una", title_2: "visiÃ³n Ãºnica", text: "\"Soy Christian Ciriello. Ayudo a empresas a definir su presencia digital fusionando estÃ©tica y rendimiento.\"", val_creativity: "Creatividad", val_creativity_desc: "Oportunidad para crear algo Ãºnico.", val_precision: "PrecisiÃ³n", val_precision_desc: "AtenciÃ³n al detalle.", val_passion: "PasiÃ³n", val_passion_desc: "Amo lo que hago.", val_quality: "Calidad", val_quality_desc: "Altos estÃ¡ndares." },
    contact: { tag: "Contactos", title_1: "Empecemos a", title_2: "colaborar", subtitle: "Â¿Tienes un proyecto? Hablemos.", label_email: "Correo", label_location: "UbicaciÃ³n", label_follow: "SÃ­gueme", form_name: "Nombre", form_name_ph: "Tu nombre", form_phone: "TelÃ©fono", form_phone_ph: "Tu telÃ©fono", form_email: "Correo", form_email_ph: "Tu correo", form_msg: "Mensaje", form_msg_ph: "CuÃ©ntame sobre tu proyecto...", form_btn: "Enviar mensaje" },
    footer: { nav: "NavegaciÃ³n", services: "Servicios", social: "Social", cta: "Reservar llamada", copyright: "Â© 2026 Christian Ciriello â€¢ Powered By Christian Ciriello" },
    project_cta: {
      title: "Â¿Te gusta este proyecto?",
      subtitle: "Podemos crear algo igual de increÃ­ble para tu negocio.",
      btn: "Hablemos de tu proyecto"
    }
  },
  fr: {
    nav: { home: "Accueil", services: "Services", portfolio: "Portfolio", about: "Ã€ propos", contact: "Contact" },
    hero: { badge: "Creatif DÃ©veloppeur", title_1: "Design qui communique,", title_2: "expÃ©riences qui convertissent.", subtitle: "IdentitÃ© de Marque â€¢ DÃ©v Web/Mobile â€¢ Graphisme", btn_work: "Voir mes travaux", btn_info: "Demander Info!", stat_projects: "Projets TerminÃ©s", stat_exp: "AnnÃ©es d'ExpÃ©rience", stat_clients: "Clients Satisfaits", scroll: "DÃ©filer pour explorer" },
    services: { tag: "Services", title_1: "Je transforme vos", title_2: "idÃ©es en rÃ©alitÃ©", subtitle: "Des solutions concrÃ¨tes pour Ã©lever votre marque.", graphic_desc: "Je crÃ©e des systÃ¨mes visuels cohÃ©rents qui racontent les valeurs de votre marque.", web_desc: "Sites web rapides et rÃ©actifs conÃ§us pour maximiser les conversions.", ios_desc: "DÃ©veloppement d'interfaces mobiles intuitives centrÃ©es sur l'utilisateur.", video_desc: "Storytelling dynamique pour vos rÃ©seaux sociaux." },
    portfolio: { tag: "Portfolio", title: "Projets", subtitle: "Une sÃ©lection de mes projets les plus significatifs.", filter_all: "Tous", view_project: "Voir le projet â†’", visit_site: "Visiter le site â†’" },
    about: { tag: "Ã€ propos", title_1: "Designer avec une", title_2: "vision unique", text: "\"Je suis Christian Ciriello. J'aide les entreprises Ã  dÃ©finir leur prÃ©sence numÃ©rique en alliant esthÃ©tique et performance.\"", val_creativity: "CrÃ©ativitÃ©", val_creativity_desc: "CrÃ©er quelque chose d'unique.", val_precision: "PrÃ©cision", val_precision_desc: "Attention aux dÃ©tails.", val_passion: "Passion", val_passion_desc: "J'aime ce que je fais.", val_quality: "QualitÃ©", val_quality_desc: "Standards Ã©levÃ©s." },
    contact: { tag: "Contacts", title_1: "CommenÃ§ons Ã ", title_2: "collaborer", subtitle: "Vous avez un projet ? Parlons-en.", label_email: "Email", label_location: "Lieu", label_follow: "Suivez-moi", form_name: "Nom", form_name_ph: "Votre nom", form_phone: "TÃ©lÃ©phone", form_phone_ph: "Votre tÃ©lÃ©phone", form_email: "Email", form_email_ph: "Votre email", form_msg: "Message", form_msg_ph: "Parlez-moi de votre projet...", form_btn: "Envoyer message" },
    footer: { nav: "Navigation", services: "Services", social: "Social", cta: "RÃ©server un appel", copyright: "Â© 2026 Christian Ciriello â€¢ Powered By Christian Ciriello" },
    project_cta: {
      title: "Vous aimez ce projet ?",
      subtitle: "Nous pouvons crÃ©er quelque chose de tout aussi incroyable pour votre entreprise.",
      btn: "Parlons de votre projet"
    }
  },
  pt: {
    nav: { home: "InÃ­cio", services: "ServiÃ§os", portfolio: "PortfÃ³lio", about: "Sobre", contact: "Contato" },
    hero: { badge: "Desenvolvedor Criativo", title_1: "Design que comunica,", title_2: "experiÃªncias que convertem.", subtitle: "Identidade de Marca â€¢ Dev Web/Mobile â€¢ Design GrÃ¡fico", btn_work: "Ver meus trabalhos", btn_info: "Pedir Info!", stat_projects: "Projetos ConcluÃ­dos", stat_exp: "Anos de ExperiÃªncia", stat_clients: "Clientes Felizes", scroll: "Role para explorar" },
    services: { tag: "ServiÃ§os", title_1: "Transformo suas", title_2: "ideias em realidade", subtitle: "SoluÃ§Ãµes concretas para elevar sua marca.", graphic_desc: "Crio sistemas visuais coerentes que contam os valores da sua marca.", web_desc: "Sites rÃ¡pidos e responsivos projetados para maximizar conversÃµes.", ios_desc: "Desenvolvimento de interfaces mÃ³veis intuitivas centradas no usuÃ¡rio.", video_desc: "Storytelling dinÃ¢mico para suas redes sociais." },
    portfolio: { tag: "PortfÃ³lio", title: "Projetos", subtitle: "Uma seleÃ§Ã£o dos meus projetos mais significativos.", filter_all: "Todos", view_project: "Ver projeto â†’", visit_site: "Visitar site â†’" },
    about: { tag: "Sobre mim", title_1: "Designer com uma", title_2: "visÃ£o Ãºnica", text: "\"Sou Christian Ciriello. Ajudo empresas a definir sua presenÃ§a digital fundindo estÃ©tica e desempenho.\"", val_creativity: "Criatividade", val_creativity_desc: "Criar algo Ãºnico.", val_precision: "PrecisÃ£o", val_precision_desc: "AtenÃ§Ã£o aos detalhes.", val_passion: "PaixÃ£o", val_passion_desc: "Amo o que faÃ§o.", val_quality: "Qualidade", val_quality_desc: "PadrÃµes elevados." },
    contact: { tag: "Contatos", title_1: "Vamos comeÃ§ar a", title_2: "colaborar", subtitle: "Tem um projeto? Vamos conversar.", label_email: "Email", label_location: "LocalizaÃ§Ã£o", label_follow: "Siga-me", form_name: "Nome", form_name_ph: "Seu nome", form_phone: "Telefone", form_phone_ph: "Seu telefone", form_email: "Email", form_email_ph: "Seu email", form_msg: "Mensagem", form_msg_ph: "Fale sobre seu projeto...", form_btn: "Enviar mensagem" },
    footer: { nav: "NavegaÃ§Ã£o", services: "ServiÃ§os", social: "Social", cta: "Agendar chamada", copyright: "Â© 2026 Christian Ciriello â€¢ Powered By Christian Ciriello" },
    project_cta: {
      title: "Gostou deste projeto?",
      subtitle: "Podemos criar algo tÃ£o incrÃ­vel quanto para o seu negÃ³cio.",
      btn: "Vamos falar sobre seu projeto"
    }
  }
};

document.addEventListener('DOMContentLoaded', () => {
  // --- Mobile Menu Logic ---
  const mobileToggle = document.getElementById('mobileToggle');
  const mobileMenu = document.getElementById('mobileMenu');

  if (mobileToggle && mobileMenu) {
    // Rimuoviamo eventuali listener precedenti clonando l'elemento (opzionale, ma sicuro)
    const newToggle = mobileToggle.cloneNode(true);
    mobileToggle.parentNode.replaceChild(newToggle, mobileToggle);
    
    newToggle.addEventListener('click', () => {
      mobileMenu.classList.toggle('active');
      newToggle.classList.toggle('active');
    });
  }

  // --- Header Scroll & Back To Top Logic ---
  const header = document.getElementById('header');
  const backToTop = document.getElementById('backToTop');

  window.addEventListener('scroll', () => {
    if (window.scrollY > 50) {
      if (header) header.classList.add('scrolled');
      if (backToTop) backToTop.classList.add('show');
    } else {
      if (header) header.classList.remove('scrolled');
      if (backToTop) backToTop.classList.remove('show');
    }
  });

  // --- Portfolio Filter Logic ---
 const filterButtons = document.querySelectorAll('.filter-btn');
const portfolioItems = document.querySelectorAll('.portfolio-card');

filterButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    // Gestione classi attive sui bottoni
    filterButtons.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');

    const filterValue = btn.getAttribute('data-filter');

    portfolioItems.forEach(item => {
      const category = item.getAttribute('data-category');

      if (filterValue === 'all') {
        // MOSTRA TUTTO TRANNE I VIDEO
        if (category === 'video') {
          item.style.display = 'none';
        } else {
          item.style.display = 'block';
        }
      } else if (filterValue === category) {
        // MOSTRA SOLO LA CATEGORIA SELEZIONATA
        item.style.display = 'block';
      } else {
        // NASCONDI IL RESTO
        item.style.display = 'none';
      }
    });
  });
});

  // --- Language Switcher Logic ---
  injectLanguageSwitcher();
  
  // Set initial language
  const savedLang = localStorage.getItem('selectedLang') || 'it';
  setLanguage(savedLang);
});

function injectLanguageSwitcher() {
  const nav = document.querySelector('.nav');
  const navCta = document.querySelector('.nav-cta');
  
  const langSwitcherHTML = `
    <div class="lang-switcher" id="langSwitcher">
      <button class="lang-btn" aria-label="Cambia lingua">
        <span class="current-flag" style="font-size: 1.4rem;"></span>
      </button>
      <div class="lang-dropdown">
        <button class="lang-option" onclick="setLanguage('it')"><span class="lang-flag">ðŸ‡®ðŸ‡¹</span> Italiano</button>
        <button class="lang-option" onclick="setLanguage('en')"><span class="lang-flag">ðŸ‡¬ðŸ‡§</span> English</button>
        <button class="lang-option" onclick="setLanguage('es')"><span class="lang-flag">ðŸ‡ªðŸ‡¸</span> EspaÃ±ol</button>
        <button class="lang-option" onclick="setLanguage('fr')"><span class="lang-flag">ðŸ‡«ðŸ‡·</span> FranÃ§ais</button>
        <button class="lang-option" onclick="setLanguage('pt')"><span class="lang-flag">ðŸ‡µðŸ‡¹</span> PortuguÃªs</button>
      </div>
    </div>
  `;

  if (nav) {
    const wrapper = document.createElement('div');
    wrapper.innerHTML = langSwitcherHTML;
    const switcher = wrapper.firstElementChild;
    
    // Insert after CTA
    if (navCta) {
      nav.insertBefore(switcher, navCta.nextSibling);
    } else {
      const mobileToggle = document.querySelector('.mobile-toggle');
      if (mobileToggle) nav.insertBefore(switcher, mobileToggle);
      else nav.appendChild(switcher);
    }

    // Toggle Dropdown
    const langBtn = switcher.querySelector('.lang-btn');
    langBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      switcher.classList.toggle('active');
      langBtn.classList.toggle('active');
    });

    document.addEventListener('click', () => {
      switcher.classList.remove('active');
      langBtn.classList.remove('active');
    });
  }
}

window.setLanguage = function(lang) {
  localStorage.setItem('selectedLang', lang);
  document.documentElement.lang = lang;

  // Update button flag
  const flags = {
    it: 'ðŸ‡®ðŸ‡¹',
    en: 'ðŸ‡¬ðŸ‡§',
    es: 'ðŸ‡ªðŸ‡¸',
    fr: 'ðŸ‡«ðŸ‡·',
    pt: 'ðŸ‡µðŸ‡¹'
  };
  const btnFlag = document.querySelector('.lang-btn .current-flag');
  if (btnFlag) {
    btnFlag.textContent = flags[lang];
  }
  
  const elements = document.querySelectorAll('[data-i18n]');
  elements.forEach(el => {
    const key = el.getAttribute('data-i18n');
    const keys = key.split('.');
    let text = translations[lang];
    keys.forEach(k => { if(text) text = text[k]; });
    
    if (text) {
      if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
        el.placeholder = text;
      } else {
        el.innerHTML = text;
      }
    }
  });
};

const videoCards = document.querySelectorAll('.portfolio-card[data-category="video"]');

videoCards.forEach(card => {
  const v = card.querySelector('video');
  
  card.addEventListener('mouseenter', () => {
    v.play();
  });

  card.addEventListener('mouseleave', () => {
    v.pause();
    v.currentTime = 0; // Torna all'inizio e mostra di nuovo la copertina
  });
});